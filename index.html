<head>
    <title>torrentweb - an anonymous and decentralized network</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <style>
      h1, p, div { text-align: center; }
      html       { background: #fffffe; }
    </style>
  </head>
  </head>
  <body>
    <script src="./torrentweb.debug.js"></script>

    <div class="container">
      <h2>Welcome to the TorrentWeb network</h2>

      <div class="well">
        <p>I see you've got some numbers. Why not let me see them?</p>

        <div id="response">
        </div>
        <br>
        <h2>Nodes</h2>
        <div class="nodestable"></div>

        <br>
        <h2>Log</h2>
        <div class="log"></div>
      </div>
    </div>
    <script>


      var torrentWeb = new TorrentWeb({ debugMode: true, isRootNode: location.hash === '#1' });
    torrentWeb.on('nodeUpdate', (nodes) => showNodes(nodes))

      var result =  torrentWeb.calc(2,5);
      log('result: ' + result)
      




function showNodes (nodesMap) {
  const nodes = Array.from(nodesMap)

  var tableRows = ''
  nodes.map(node => {
     const addr = node[0]
     const details = node[1]
     tableRows += `
    <tr>
      <th scope="row">${addr}</th>
      <td>${details.peerId}</td>
      <td>${details.t}</td>
    </tr>`
   })

   const table = `<table class="table table-dark">
  <thead>
    <tr>
      <th scope="col">Address</th>
      <th scope="col">Peer</th>
      <th scope="col">Time</th>
    </tr>
  </thead>
  <tbody>` + tableRows +
    `</tbody>
</table>`

//var div = document.createElement('div');
  //div.innerHTML = table

   document.querySelector('.nodestable').innerHTML = table //.appendChild(div) 
}
      function log (str) {
        var p = document.createElement('p')
        p.innerHTML = str
        document.querySelector('.log').appendChild(p)
      }
           // $response.innerHTML = `The result is: ${result}`;
          </script>
      
  </body>

  </html>